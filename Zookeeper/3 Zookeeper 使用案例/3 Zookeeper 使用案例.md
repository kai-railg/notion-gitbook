# 3 Zookeeper 使用案例

- 选主
    - 利用Paxos 算法的leader选举策略
- 配置管理
    - 对配置文件监听，如果发生改动则分发到各个节点上
- 分布式锁
    - 在申请锁时，创建一个znode，如果znode存在，则表示锁存在，如果不存在，则创建
    - 如果锁存在时，不应该直接watch这个znode，而是要创建一个锁的层级关系，最新的锁只watch上一个锁，避免锁释放时通知全部但是只有一个获取
- 服务发现
    - 在服务创建时自动创建一个znode，读取该znode的信息做服务发现